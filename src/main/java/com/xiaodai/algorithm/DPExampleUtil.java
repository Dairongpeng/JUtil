package com.xiaodai.algorithm;

/**
 * Author ï¼šdai
 * Date   ï¼š2021/1/4 11:54 ä¸Šåˆ
 * Descriptionï¼šåŠ¨æ€è§„åˆ’çš„å‡ ä¸ªä¾‹å­
 */
public class DPExampleUtil {

    /**
     * 1ã€ğŸ’èƒŒåŒ…é—®é¢˜ï¼šç»™å®šä¸¤ä¸ªé•¿åº¦éƒ½ä¸ºNçš„æ•°ç»„weightså’Œvaluesï¼Œweight[i]å’Œvalues[i]åˆ†åˆ«ä»£è¡¨iå·ç‰©å“çš„é‡é‡å’Œä»·å€¼ã€‚
     * ç»™å®šä¸€ä¸ªæ­£æ•°bagï¼Œè¡¨ç¤ºä¸€ä¸ªè½½é‡bagçš„è¢‹å­ï¼Œä½ è£…çš„ç‰©å“ä¸èƒ½è¶…è¿‡è¿™ä¸ªé‡é‡ã€‚è¿”å›ä½ èƒ½è£…ä¸‹æœ€å¤šçš„ä»·å€¼æ˜¯å¤šå°‘ï¼Ÿ
     *
     * @param w   é‡é‡æ•°ç»„
     * @param v   ä»·å€¼æ•°ç»„
     * @param bag èƒŒåŒ…çš„æœ€å¤§å®¹é‡
     * @return è¿”å›è¯¥èƒŒåŒ…æ‰€èƒ½è£…ä¸‹çš„æœ€å¤§ä»·å€¼
     */
    public static int getMaxValue(int[] w, int[] v, int bag) {
        // åˆå§‹ä¼ å…¥w,vã€‚indexä½ç½®å¼€å§‹ï¼ŒalreadyWè¡¨ç¤ºåœ¨indexä½ç½®çš„æ—¶å€™ï¼Œé‡é‡å·²ç»åˆ°è¾¾äº†å¤šå°‘
        return process(w, v, 0, 0, bag);
    }

    // æš´åŠ›é€’å½’çš„ç¬¬ä¸€ç§å°è¯•
    // 0..index-1ä¸Šåšäº†è´§ç‰©çš„é€‰æ‹©ï¼Œä½¿å¾—ä½ å·²ç»è¾¾åˆ°çš„é‡é‡æ˜¯å¤šå°‘ alreadyW
    // å¦‚æœè¿”å›-1ï¼Œè®¤ä¸ºæ²¡æœ‰æ–¹æ¡ˆ
    // å¦‚æœä¸è¿”å›-1ï¼Œè®¤ä¸ºè¿”å›çš„å€¼æ˜¯çœŸå®ä»·å€¼
    public static int process(int[] w, int[] v, int index, int alreadyW, int bag) {
        // base case
        if (alreadyW > bag) {
            return -1;
        }
        // é‡é‡æ²¡è¶…
        if (index == w.length) {
            return 0;
        }
        // å½“å‰ä¸é€‰æ‹©indexçš„è´§ç‰©æƒ…å†µä¸‹ï¼Œåç»­çš„ä»·å€¼
        // æ— éœ€ä¼ é€’å½“å‰indexçš„é‡é‡ï¼Œä¸”p1å°±æ˜¯æ€»ä»·å€¼
        int p1 = process(w, v, index + 1, alreadyW, bag);
        // å½“å‰é€‰æ‹©äº†indexçš„è´§ç‰©ï¼ŒæŠŠé‡é‡åŠ ä¸Šï¼Œç»§ç»­å‘ä¸‹é€’å½’
        int p2next = process(w, v, index + 1, alreadyW + w[index], bag);
        // p2è¡¨ç¤ºè¦äº†å½“å‰è´§ç‰©ä¹‹åæ€»ä»·å€¼åº”è¯¥æ˜¯åç»­ä»·å€¼åŠ ä¸Šå½“å‰ä»·å€¼
        int p2 = -1;
        if (p2next != -1) {
            p2 = v[index] + p2next;
        }
        return Math.max(p1, p2);

    }


    /**
     * èƒŒåŒ…é—®é¢˜çš„ç¬¬äºŒç§æš´åŠ›å°è¯•ã€‚
     *
     * @param w   é‡é‡æ•°ç»„
     * @param v   ä»·å€¼æ•°ç»„
     * @param bag èƒŒåŒ…å®¹é‡
     * @return è¿”å›ç»™å®šèƒŒåŒ…å®¹é‡æ‰€èƒ½è£…ä¸‹çš„æœ€å¤§ä»·å€¼
     */
    public static int maxValue(int[] w, int[] v, int bag) {
        // ç›¸æ¯”ä¸Šä¸€ä¸ªæš´åŠ›é€’å½’å°è¯•ï¼Œå»æ‰äº†alreadyWã€‚ç”¨èƒŒåŒ…å‰©ä½™ç©ºé—´ä»£æ›¿ï¼›restè¡¨ç¤ºèƒŒåŒ…å‰©ä½™ç©ºé—´ï¼Œåˆå§‹å‰©ä½™ç©ºé—´å°±æ˜¯èƒŒåŒ…å®¹é‡
        return process(w, v, 0, bag);
    }

    public static int process(int[] w, int[] v, int index, int rest) {
        // base case 1 æ— æ•ˆæ–¹æ¡ˆã€‚èƒŒåŒ…å‰©ä½™å®¹é‡è£…ä¸ä¸‹å½“å‰é‡é‡çš„æƒ…å†µ
        if (rest < 0) {
            return -1;
        }
        // rest >=0ã€‚indexæ¥åˆ°ç»ˆæ­¢ä½ç½®ï¼Œæ²¡è´§ç‰©äº†ï¼Œå½“å‰è¿”å›0ä»·å€¼
        // base case 2
        if (index == w.length) {
            return 0;
        }
        // æœ‰è´§ä¹Ÿæœ‰ç©ºé—´ã€‚å½“å‰indexä¸é€‰æ‹©ï¼Œå¾—åˆ°p1æ€»ä»·å€¼
        int p1 = process(w, v, index + 1, rest);
        int p2 = -1;
        // é€‰æ‹©äº†indexä½ç½®ï¼Œå‰©ä½™ç©ºé—´å‡å»å½“å‰é‡é‡
        int p2Next = process(w, v, index + 1, rest - w[index]);
        // é€‰æ‹©indexçš„æ€»ä»·å€¼ï¼Œæ˜¯index...çš„ä»·å€¼åŠ ä¸Šä¸ªå½“å‰indexçš„ä»·å€¼
        if (p2Next != -1) {
            p2 = v[index] + p2Next;
        }
        return Math.max(p1, p2);
    }


    /**
     * 0-1èƒŒåŒ…é—®é¢˜ï¼šåŠ¨æ€è§„åˆ’è§£å†³æ–¹æ¡ˆã€‚åœ¨æš´åŠ›é€’å½’çš„æ€è·¯ä¸Šæ”¹è¿›
     * <p>
     * ä»¥èƒŒåŒ…é—®é¢˜ä¸¾ä¾‹ï¼Œæˆ‘ä»¬æ¯ä¸€ä¸ªé‡é‡æœ‰è¦å’Œä¸è¦ä¸¤ä¸ªé€‰æ‹©ï¼Œä¸”éƒ½è¦é€’å½’å±•å¼€ã€‚é‚£ä¹ˆæˆ‘ä»¬çš„é€’å½’æ—¶é—´å¤æ‚åº¦å°¾O(2^N)ã€‚
     * è€Œè®°å¿†åŒ–æœç´¢ï¼Œæ ¹æ®å¯å˜å‚æ•°å¾—åˆ°çš„é•¿ä¸ºNä»·å€¼ä¸ºWçš„äºŒç»´è¡¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N*bag)ã€‚
     * å¦‚æœé€’å½’è¿‡ç¨‹ä¸­çŠ¶æ€è½¬ç§»æœ‰åŒ–ç®€ç»§ç»­ä¼˜åŒ–çš„å¯èƒ½ï¼Œä¾‹å¦‚æšä¸¾ã€‚é‚£ä¹ˆç»å…¸åŠ¨æ€è§„åˆ’å¯ä»¥ç»§ç»­ä¼˜åŒ–ï¼Œ
     * å¦åˆ™è®°å¿†åŒ–æœç´¢å’ŒåŠ¨æ€è§„åˆ’çš„æ—¶é—´å¤æ‚åº¦æ˜¯ä¸€æ ·çš„
     *
     * @param w   é‡é‡æ•°ç»„
     * @param v   ä»·å€¼æ•°ç»„
     * @param bag èƒŒåŒ…å®¹é‡
     * @return è¿”å›ä»·å€¼
     */
    public static int dpWay(int[] w, int[] v, int bag) {
        int N = w.length;
        // å‡†å¤‡ä¸€å¼ dpè¡¨ï¼Œè¡Œå·ä¸ºæˆ‘ä»¬çš„é‡é‡èŒƒå›´bag+1ã€‚åˆ—ä¸ºæˆ‘ä»¬çš„ä»·å€¼æ•°ç›®ä¸ªæ•°çš„èŒƒå›´N+1ã€‚dpæ•°ç»„è£…ä¸‹æ‰€æœ‰çš„å¯èƒ½æ€§ã€‚
        int[][] dp = new int[N + 1][bag + 1];
        // ç”±äºæš´åŠ›é€’å½’ä¸­index==w.lengthçš„æ—¶å€™ï¼Œæ€»æ˜¯è¿”å›0ã€‚æ‰€ä»¥ï¼š
        // dp[N][...] = 0ã€‚æ•´å½¢æ•°ç»„åˆå§‹åŒ–ä¸º0ï¼Œæ— éœ€å¤„ç†
        // ç”±äºNè¡Œå·²ç»åˆå§‹åŒ–ä¸º0ï¼Œæˆ‘ä»¬ä»N-1å¼€å§‹ã€‚å¡«æˆ‘ä»¬çš„dpè¡¨
        for (int index = N - 1; index >= 0; index--) {
            // å‰©ä½™ç©ºé—´ä»0å¼€å§‹ï¼Œä¸€ç›´å¡«å†™åˆ°bag
            for (int rest = 0; rest <= bag; rest++) { // rest < 0
                // é€šè¿‡æ­£å¸¸ä½ç½®çš„é€’å½’å¤„ç†ã€‚æˆ‘ä»¬è½¬è€Œå¡«å†™æˆ‘ä»¬çš„dpè¡¨
                // æ‰€ä»¥æˆ‘ä»¬p1ç­‰äºdpè¡¨çš„ä¸‹ä¸€å±‚å‘ä¸Šä¸€å±‚è¿”å›
                int p1 = dp[index + 1][rest];
                int p2 = -1;
                // rest - w[index] ä¸è¶Šç•Œ
                if (rest - w[index] >= 0) {
                    p2 = v[index] + dp[index + 1][rest - w[index]];
                }
                // p1å’Œp2å–æœ€å¤§å€¼
                dp[index][rest] = Math.max(p1, p2);
            }
        }
        // æœ€ç»ˆè¿”å›dpè¡¨çš„0ï¼Œbagä½ç½®ï¼Œå°±æ˜¯æˆ‘ä»¬æš´åŠ›é€’å½’çš„ä¸»å‡½æ•°è°ƒç”¨
        return dp[0][bag];
    }


    /**
     * 2ã€æœºå™¨äººè¿åŠ¨é—®é¢˜ï¼šä¸€æ’æœ‰Nä¸ªä½ç½®ï¼Œ1~Nï¼ŒN > 2 ï¼Œå¼€å§‹æ—¶æœºå™¨äººåœ¨å…¶ä¸­çš„Mä½ç½®ä¸Šã€‚æœºå™¨äººåœ¨1ä½ç½®ä¸Šåªèƒ½å¾€å³èµ°ï¼Œåœ¨Nä½ç½®ä¸Šåªèƒ½å¾€å·¦èµ°
     * è§„å®šæœºå™¨äººå¿…é¡»èµ°Kæ­¥ï¼Œæœ€ç»ˆèƒ½æ¥åˆ°Pä½ç½®ï¼ŒPåœ¨1~Nä¸Šï¼Œçš„æ–¹æ³•æœ‰å¤šå°‘ç§ï¼Ÿ
     * <p>
     * æ³¨ï¼šçº¯ç²¹æš´åŠ›é€’å½’è§£æ³•ã€‚ä¸åŠ å…¥ç¼“å­˜
     *
     * @param N æ¨ªå‘ä½ç½®æ•°
     * @param M ä»Mç‚¹å‡ºå‘
     * @param K å¿…é¡»ç»è¿‡Kæ­¥
     * @param P æœ€ç»ˆåˆ°è¾¾Pä½ç½®
     * @return æ–¹æ³•æ•°
     */
    public static int ways1(int N, int M, int K, int P) {
        // å‚æ•°æ— æ•ˆç›´æ¥è¿”å›0
        if (N < 2 || K < 1 || M < 1 || M > N || P < 1 || P > N) {
            return 0;
        }
        // æ€»å…±Nä¸ªä½ç½®ï¼Œä»Mç‚¹å‡ºå‘ï¼Œè¿˜å‰©Kæ­¥å¯ä»¥èµ°ï¼Œè¿”å›æœ€ç»ˆèƒ½è¾¾åˆ°Pçš„æ–¹æ³•æ•°
        return walk(N, M, K, P);
    }

    // N : ä½ç½®ä¸º1 ~ Nï¼Œå›ºå®šå‚æ•°
    // cur : å½“å‰åœ¨curä½ç½®ï¼Œå¯å˜å‚æ•°
    // rest : è¿˜å‰©restæ­¥æ²¡æœ‰èµ°ï¼Œå¯å˜å‚æ•°
    // P : æœ€ç»ˆç›®æ ‡ä½ç½®æ˜¯Pï¼Œå›ºå®šå‚æ•°
    // è¯¥å‡½æ•°çš„å«ä¹‰ï¼šåªèƒ½åœ¨1~Nè¿™äº›ä½ç½®ä¸Šç§»åŠ¨ï¼Œå½“å‰åœ¨curä½ç½®ï¼Œèµ°å®Œrestæ­¥ä¹‹åï¼Œåœåœ¨Pä½ç½®çš„æ–¹æ³•æ•°ä½œä¸ºè¿”å›å€¼è¿”å›
    public static int walk(int N, int cur, int rest, int P) {
        // å¦‚æœæ²¡æœ‰å‰©ä½™æ­¥æ•°äº†ï¼Œå½“å‰çš„curä½ç½®å°±æ˜¯æœ€åçš„ä½ç½®
        // å¦‚æœæœ€åçš„ä½ç½®åœåœ¨Pä¸Šï¼Œé‚£ä¹ˆä¹‹å‰åšçš„ç§»åŠ¨æ˜¯æœ‰æ•ˆçš„
        // å¦‚æœæœ€åçš„ä½ç½®æ²¡åœ¨Pä¸Šï¼Œé‚£ä¹ˆä¹‹å‰åšçš„ç§»åŠ¨æ˜¯æ— æ•ˆçš„
        if (rest == 0) {
            return cur == P ? 1 : 0;
        }
        // å¦‚æœè¿˜æœ‰restæ­¥è¦èµ°ï¼Œè€Œå½“å‰çš„curä½ç½®åœ¨1ä½ç½®ä¸Šï¼Œé‚£ä¹ˆå½“å‰è¿™æ­¥åªèƒ½ä»1èµ°å‘2
        // åç»­çš„è¿‡ç¨‹å°±æ˜¯ï¼Œæ¥åˆ°2ä½ç½®ä¸Šï¼Œè¿˜å‰©rest-1æ­¥è¦èµ°
        if (cur == 1) {
            return walk(N, 2, rest - 1, P);
        }
        // å¦‚æœè¿˜æœ‰restæ­¥è¦èµ°ï¼Œè€Œå½“å‰çš„curä½ç½®åœ¨Nä½ç½®ä¸Šï¼Œé‚£ä¹ˆå½“å‰è¿™æ­¥åªèƒ½ä»Nèµ°å‘N-1
        // åç»­çš„è¿‡ç¨‹å°±æ˜¯ï¼Œæ¥åˆ°N-1ä½ç½®ä¸Šï¼Œè¿˜å‰©rest-1æ­¥è¦èµ°
        if (cur == N) {
            return walk(N, N - 1, rest - 1, P);
        }
        // å¦‚æœè¿˜æœ‰restæ­¥è¦èµ°ï¼Œè€Œå½“å‰çš„curä½ç½®åœ¨ä¸­é—´ä½ç½®ä¸Šï¼Œé‚£ä¹ˆå½“å‰è¿™æ­¥å¯ä»¥èµ°å‘å·¦ï¼Œä¹Ÿå¯ä»¥èµ°å‘å³
        // èµ°å‘å·¦ä¹‹åï¼Œåç»­çš„è¿‡ç¨‹å°±æ˜¯ï¼Œæ¥åˆ°cur-1ä½ç½®ä¸Šï¼Œè¿˜å‰©rest-1æ­¥è¦èµ°
        // èµ°å‘å³ä¹‹åï¼Œåç»­çš„è¿‡ç¨‹å°±æ˜¯ï¼Œæ¥åˆ°cur+1ä½ç½®ä¸Šï¼Œè¿˜å‰©rest-1æ­¥è¦èµ°
        // èµ°å‘å·¦ã€èµ°å‘å³æ˜¯æˆªç„¶ä¸åŒçš„æ–¹æ³•ï¼Œæ‰€ä»¥æ€»æ–¹æ³•æ•°è¦éƒ½ç®—ä¸Š
        return walk(N, cur + 1, rest - 1, P) + walk(N, cur - 1, rest - 1, P);
    }


    /**
     * 2ã€æœºå™¨äººè¿åŠ¨é—®é¢˜ã€‚è§£æ³•2ï¼›æ ¹æ®æš´åŠ›é€’å½’ï¼ŒåŠ å…¥ç¼“å­˜ï¼Œå®ç°è®°å¿†åŒ–æœç´¢ã€‚
     *
     * @param N æ¨ªå‘ä½ç½®æ•°
     * @param M ä»Mç‚¹å‡ºå‘
     * @param K å¿…é¡»ç»è¿‡Kæ­¥
     * @param P æœ€ç»ˆåˆ°è¾¾Pä½ç½®
     * @return æ–¹æ³•æ•°
     */
    public static int waysCache(int N, int M, int K, int P) {
        // å‚æ•°æ— æ•ˆç›´æ¥è¿”å›0
        if (N < 2 || K < 1 || M < 1 || M > N || P < 1 || P > N) {
            return 0;
        }

        // æˆ‘ä»¬å‡†å¤‡ä¸€å¼ ç¼“å­˜çš„dpè¡¨
        // ç”±äºæˆ‘ä»¬çš„curèŒƒå›´æ˜¯1~Nï¼Œæˆ‘ä»¬å‡†å¤‡N+1ã€‚
        // restèŒƒå›´åœ¨1~Kã€‚æˆ‘ä»¬å‡†å¤‡K+1ã€‚
        // ç›®çš„æ˜¯æŠŠæˆ‘ä»¬çš„å¯èƒ½ç»“æœéƒ½èƒ½è£…å¾—ä¸‹
        int[][] dp = new int[N + 1][K + 1];
        // è®¾ç½®è¿™å¼ è¡¨çš„åˆå§‹å€¼éƒ½ä¸º-1ï¼Œä»£è¡¨éƒ½è¿˜æ²¡ç”¨è¿‡
        for (int row = 0; row <= N; row++) {
            for (int col = 0; col <= K; col++) {
                dp[row][col] = -1;
            }
        }
        return walkCache(N, M, K, P, dp);
    }

    // HashMap<String, Integer>   (19,100)ã€‚ä¹Ÿå¯ä»¥ä¸ç”¨Hashè¡¨ï¼Œç›´æ¥å­—ç¬¦ä¸²æ‹¼æ¥ä¾‹å¦‚ "19_100"
    // æˆ‘æƒ³æŠŠæ‰€æœ‰curå’Œrestçš„ç»„åˆï¼Œè¿”å›çš„ç»“æœï¼ŒåŠ å…¥åˆ°ç¼“å­˜é‡Œ
    public static int walkCache(int N, int cur, int rest, int P, int[][] dp) {
        // å½“å‰åœºæ™¯å·²ç»è®¡ç®—è¿‡ï¼Œä¸è¦å†æš´åŠ›å±•å¼€ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­æ‹¿
        if (dp[cur][rest] != -1) {
            return dp[cur][rest];
        }
        if (rest == 0) {
            // å…ˆåŠ ç¼“å­˜
            dp[cur][rest] = cur == P ? 1 : 0;
            return dp[cur][rest];
        }
        // curä¸º1ï¼Œå½“å‰åªèƒ½å¾€å³èµ°
        if (cur == 1) {
            // å…ˆåŠ ç¼“å­˜
            dp[cur][rest] = walkCache(N, 2, rest - 1, P, dp);
            return dp[cur][rest];
        }
        // curä¸ºN,å½“å‰åªèƒ½å¾€å·¦èµ°
        if (cur == N) {
            // å…ˆåŠ ç¼“å­˜
            dp[cur][rest] = walkCache(N, N - 1, rest - 1, P, dp);
            return dp[cur][rest];
        }
        // å…ˆåŠ ç¼“å­˜
        dp[cur][rest] = walkCache(N, cur + 1, rest - 1, P, dp)
                + walkCache(N, cur - 1, rest - 1, P, dp);
        return dp[cur][rest];
    }


    /**
     * 2ã€æœºå™¨äººè¿åŠ¨ï¼Œæ ¹æ®è®¡åˆ’åŒ–æœç´¢ã€‚æ”¹é€ æˆåŠ¨æ€è§„åˆ’ã€‚å®è´¨å°±æ˜¯å¡«DPè¡¨ï¼Œè¿”å›æˆ‘ä»¬éœ€è¦æ±‚è§£çš„dpè¡¨ä¸­çš„ä½ç½®çš„å€¼
     *
     * @param N æ¨ªå‘ä½ç½®æ•°
     * @param M ä»Mç‚¹å‡ºå‘
     * @param K å¿…é¡»ç»è¿‡Kæ­¥
     * @param P æœ€ç»ˆåˆ°è¾¾Pä½ç½®
     * @return æ–¹æ³•æ•°
     */
    public static int ways2(int N, int M, int K, int P) {
        // å‚æ•°æ— æ•ˆç›´æ¥è¿”å›0
        if (N < 2 || K < 1 || M < 1 || M > N || P < 1 || P > N) {
            return 0;
        }
        int[][] dp = new int[K + 1][N + 1];
        // ç»è¿‡0æ­¥ï¼Œå½“å‰ä½ç½®å†Pä½ç½®ä¸Šï¼Œåˆ°è¾¾Pä½ç½®çš„æ–¹æ³•æœ‰ä¸€ç§
        dp[0][P] = 1;
        // å¡«å……DPè¡¨
        for (int i = 1; i <= K; i++) {
            for (int j = 1; j <= N; j++) {
                // è¿˜å‰©iæ­¥ï¼Œå½“å‰åœ¨jä½ç½®ã€‚jå¦‚æœæ˜¯1ä½ç½®ï¼Œåªèƒ½å¾€å³èµ°ï¼Œè¿˜å‰©i-1æ­¥ã€‚æˆ‘ä»¬éœ€è¦æ‹¿åˆ°2ä½ç½®è¿˜å‰©i-1æ­¥çš„çš„dpä¿¡æ¯
                if (j == 1) {
                    dp[i][j] = dp[i - 1][2];
                } else if (j == N) { // è¿˜å‰©iæ­¥ï¼Œå½“å‰åœ¨jä½ç½®ã€‚jå¦‚æœæ˜¯Nä½ç½®ï¼Œåªèƒ½å¾€å·¦èµ°ï¼Œè¿˜å‰©i-1æ­¥ã€‚æˆ‘ä»¬éœ€è¦æ‹¿åˆ°N-1ä½ç½®è¿˜å‰©i-1æ­¥çš„çš„dpä¿¡æ¯
                    dp[i][j] = dp[i - 1][N - 1];
                } else { // åœ¨ä¸­é—´çš„ä»»æ„ä½ç½®ï¼ŒDPå½“å‰çš„DPä¿¡æ¯ï¼Œä¾èµ–äºå·¦å³DPä¿¡æ¯çš„å’Œ
                    dp[i][j] = dp[i - 1][j - 1] + dp[i - 1][j + 1];
                }
            }
        }
        return dp[K][M];
    }


    /**
     * 3ã€å‡‘è´§å¸é—®é¢˜ï¼šæœ‰ä¸€ä¸ªè¡¨ç¤ºè´§å¸é¢å€¼çš„æ•°ç»„arrï¼Œæ¯ç§é¢å€¼çš„è´§å¸å¯ä»¥ä½¿ç”¨ä»»æ„å¤šå¼ ã€‚arræ•°ç»„å…ƒç´ ä¸ºæ­£æ•°ï¼Œä¸”æ— é‡å¤å€¼ã€‚ä¾‹å¦‚[7,3,100,50]è¿™æ˜¯å››ç§é¢å€¼çš„è´§å¸ã€‚
     * ç»™å®šä¸€ä¸ªç‰¹å®šé‡‘é¢Sumï¼Œæˆ‘ä»¬ç”¨è´§å¸é¢å€¼æ•°ç»„æœ‰å¤šå°‘ç§æ–¹æ³•ï¼Œå¯ä»¥å‡‘å‡ºè¯¥é¢å€¼ã€‚ä¾‹å¦‚P=1000,ç”¨è¿™æ˜¯å››ç§é¢å€¼æœ‰å¤šå°‘ç§å¯èƒ½å‡‘å‡º1000
     *
     * @param arr è´§å¸é¢å€¼æ•°ç»„
     * @param aim å‡‘å‡ºçš„ç›®æ ‡é‡‘é¢
     * @return è¿”å›æœ‰å¤šå°‘ç§æ–¹æ¡ˆ
     */
    // arrä¸­éƒ½æ˜¯æ­£æ•°ä¸”æ— é‡å¤å€¼ï¼Œè¿”å›ç»„æˆaimçš„æ–¹æ³•æ•°ï¼Œæš´åŠ›é€’å½’
    public static int waysCoin(int[] arr, int aim) {
        if (arr == null || arr.length == 0 || aim < 0) {
            return 0;
        }
        return processCoin(arr, 0, aim);
    }

    public static int processCoin(int[] arr, int index, int rest) {
        // base case
        // å½“åœ¨é¢å€¼æ•°ç»„çš„arr.lengthï¼Œæ­¤æ—¶è¶Šç•Œï¼Œæ²¡æœ‰è´§å¸å¯ä»¥é€‰æ‹©ã€‚
        // å¦‚æœå½“å‰ç›®æ ‡é‡‘é¢aimä¹Ÿå°±æ˜¯åˆå§‹çš„restå°±æ˜¯0ï¼Œé‚£ä¹ˆå­˜åœ¨ä¸€ç§æ–¹æ³•ï¼Œå¦‚æœç›®æ ‡é‡‘é¢aimä¸ä¸º0ï¼Œè¿”å›0ä¸­æ–¹æ³•
        if (index == arr.length) {
            return rest == 0 ? 1 : 0;
        }

        // æ™®éä½ç½®
        int ways = 0;
        // ä»0å·ä½ç½®å¼€å§‹æšä¸¾ï¼Œé€‰æ‹©0å¼ ï¼Œ1å¼ ï¼Œ2å¼ ç­‰
        // æ¡ä»¶æ˜¯å¼ æ•°countä¹˜ä»¥é€‰æ‹©çš„é¢å€¼ï¼Œä¸è¶…è¿‡ç›®æ ‡é¢å€¼restã€‚å½“å‰å¯ä»¥ç»§ç»­é€‰æ‹©
        for (int count = 0; count * arr[index] <= rest; count++) {
            // æ–¹æ³•æ•°åŠ ä¸Šé™¤å»å½“å‰é€‰æ‹©åæ‰€å‰©é¢é¢åˆ°ä¸‹ä¸€ä½ç½®index + 1çš„é€‰æ‹©æ•°ï¼Œé€’å½’ã€‚rest - (count * arr[index]ä¸ºå½“å‰é€‰æ‹©åè¿˜å‰©çš„ç›®æ ‡é¢å€¼
            ways += processCoin(arr, index + 1, rest - (count * arr[index]));
        }
        return ways;
    }

    /**
     * å‡‘è´§å¸é—®é¢˜ï¼šæš´åŠ›é€’å½’æ”¹è®°å¿†åŒ–æœç´¢è§£å†³æ–¹æ¡ˆã€‚waysCoinæš´åŠ›é€’å½’ï¼Œæ”¹ä¸ºè®°å¿†åŒ–æœç´¢ã€‚waysCoinBySearchä¸ºè®°å¿†åŒ–æœç´¢ç‰ˆæœ¬
     *
     * @param arr
     * @param aim
     * @return
     */
    public static int waysCoinBySearch(int[] arr, int aim) {
        if (arr == null || arr.length == 0 || aim < 0) {
            return 0;
        }
        // ç¼“å­˜ç»“æ„ï¼Œä¸”åªå’Œindexå’Œrestæœ‰å…³ï¼Œè·Ÿarræ— å…³ã€‚å³é€‰æ‹©ä¸é€‰æ‹©æŸç§é¢å€¼çš„è´§å¸çš„ä½ç½®åœ¨å˜ï¼Œé€‰æ‹©ä¸é€‰æ‹©åç›®æ ‡é¢å€¼åœ¨å˜ã€‚ç¼“å­˜ç»“æ„ç¡®ä¿è£…ä¸‹æ‰€æœ‰å¯èƒ½æ€§
        int[][] dp = new int[arr.length + 1][aim + 1];
        // ä¸€å¼€å§‹æ‰€æœ‰çš„è¿‡ç¨‹ï¼Œéƒ½æ²¡æœ‰è®¡ç®—å‘¢ï¼ŒdpäºŒç»´è¡¨åˆå§‹åŒ–ä¸º-1
        for (int i = 0; i < dp.length; i++) {
            for (int j = 0; j < dp[0].length; j++) {
                dp[i][j] = -1;
            }
        }
        // ç¼“å­˜ç»“æ„å‘ä¼ é€’è¿›é€’å½’è¿‡ç¨‹
        return processCoinBySearch(arr, 0, aim, dp);
    }

    // å¦‚æœindexå’Œrestçš„å‚æ•°ç»„åˆï¼Œæ˜¯æ²¡ç®—è¿‡çš„ï¼Œdp[index][rest] == -1
    // å¦‚æœindexå’Œrestçš„å‚æ•°ç»„åˆï¼Œæ˜¯ç®—è¿‡çš„ï¼Œdp[index][rest]  > - 1
    public static int processCoinBySearch(int[] arr, int index, int rest, int[][] dp) {
        // å½“å‰éœ€è¦é€’å½’æ‹†åˆ†çš„ç»“æœï¼Œå·²ç»åœ¨ç¼“å­˜ç»“æ„ä¸­å­˜åœ¨äº†ï¼Œé€’å½’æ— éœ€å±•å¼€ã€‚ç›´æ¥æ‹¿ç¼“å­˜
        if (dp[index][rest] != -1) {
            return dp[index][rest];
        }
        // å¦‚æœé€’å½’æ¥åˆ°äº†arr.lengthã€‚åç»­æ²¡æœ‰é€‰æ‹©ï¼Œå¦‚æœaimå°±æ˜¯0,é‚£å°±æ˜¯ä¸€ç§ç»“è¿‡å°±æ˜¯ä¸é€‰æ‹©arr.lengthã€‚å¦åˆ™aimä¸ç­‰äº0ï¼Œé‚£å°±æ˜¯0ä¸­å¯èƒ½
        // base case
        if (index == arr.length) {
            dp[index][rest] = rest == 0 ? 1 : 0;
            return dp[index][rest];
        }

        int ways = 0;
        // ä¸­é—´çš„ä»»æ„ä½ç½®ï¼Œå½“å‰ä½ç½®çš„é¢å€¼é€‰æ‹©åï¼Œä»ç„¶æ²¡è¾¾åˆ°å½“å‰ç›®æ ‡é¢å€¼ï¼Œé€‰æ‹©å½“å‰ï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªä½ç½®é€’å½’
        for (int count = 0; count * arr[index] <= rest; count++) {
            // è¿”å›ä¹‹å‰åŠ å…¥ç¼“å­˜
            ways += processCoinBySearch(arr, index + 1, rest - (count * arr[index]), dp);
        }
        // è¿”å›ä¹‹å‰åŠ å…¥ç¼“å­˜
        dp[index][rest] = ways;
        return ways;
    }


    /**
     * å‡‘è´§å¸é—®é¢˜ï¼šè®°å¿†åŒ–æœç´¢æ”¹é€ ä¸ºåŠ¨æ€è§„åˆ’ç‰ˆæœ¬ã€‚å¦‚æœæ²¡æœ‰æšä¸¾è¡Œä¸ºï¼Œè¯¥åŠ¨æ€è¯¥è§„åˆ’ä¸ºè‡ªé¡¶å‘ä¸‹çš„åŠ¨æ€è§„åˆ’å’Œè®°å¿†åŒ–æœç´¢ç­‰æ•ˆï¼Œä½†è¿™é¢˜å­˜åœ¨æšä¸¾è¡Œä¸ºã€‚
     *
     * @param arr é¢å€¼æ•°ç»„
     * @param aim ç›®æ ‡é¢å€¼
     * @return è¿”å›æ–¹æ³•æ•°ç›®
     */
    public static int waysCoinByDP(int[] arr, int aim) {
        if (arr == null || arr.length == 0 || aim < 0) {
            return 0;
        }
        int N = arr.length;
        // dpè¡¨ã€‚ä½ç½®åœ¨å˜ï¼Œç›®æ ‡é¢å€¼éšç€é€‰æ‹©è¿‡ç¨‹åœ¨å˜
        int[][] dp = new int[N + 1][aim + 1];
        // æ ¹æ®é€’å½’æ–¹æ³•ï¼ŒNä¸ºarrçš„è¶Šç•Œä½ç½®ï¼Œä½†æ˜¯æˆ‘ä»¬çš„dpè¡¨å®šä¹‰çš„æ˜¯N+1ã€‚
        // Nä½ç½®ï¼Œå¦‚æœaimä¸º0ï¼Œåˆ™dp[N][0] = 1;
        dp[N][0] = 1;// dp[N][1...aim] = 0;

        // æ¯ä¸ªä½ç½®ä¾èµ–è‡ªå·±ä¸‹é¢çš„ä½ç½®ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä»ä¸‹å¾€ä¸Šå¾ªç¯
        for (int index = N - 1; index >= 0; index--) {
            // restä»å·¦å¾€å³
            for (int rest = 0; rest <= aim; rest++) {
                int ways = 0;
                // æ™®éä½ç½®å¡«dpè¡¨
                for (int count = 0; count * arr[index] <= rest; count++) {
                    ways += dp[index + 1][rest - (count * arr[index])];
                }
                dp[index][rest] = ways;
            }
        }
        // æœ€ç»ˆæˆ‘ä»¬éœ€è¦[0,aim]ä½ç½®çš„è§£
        return dp[0][aim];
    }

    /**
     * å‡‘è´§å¸é—®é¢˜ï¼šç”±äºå­˜åœ¨æšä¸¾è¡Œä¸ºï¼Œè¯¥é¢˜å¯ä»¥åœ¨åŠ¨æ€è§„åˆ’çš„åŸºç¡€ä¸Šæ®éœ€ä¼˜åŒ–ã€‚æ ¹æ®æšä¸¾ï¼Œç”¨å…·ä½“åŒ–ä¾‹å­æ¥æ‰¾å‡ºè§„å¾‹ï¼Œçœæ‰æšä¸¾
     * @param arr é¢å€¼æ•°ç»„
     * @param aim ç›®æ ‡é¢å€¼
     * @return è¿”å›æ–¹æ³•æ•°ç›®
     */
    public static int waysPlush(int[] arr, int aim) {
        if (arr == null || arr.length == 0 || aim < 0) {
            return 0;
        }
        int N = arr.length;
        int[][] dp = new int[N + 1][aim + 1];
        dp[N][0] = 1;// dp[N][1...aim] = 0;
        for(int index = N - 1; index >= 0; index--) {
            for(int rest = 0; rest <= aim; rest++) {
                dp[index][rest] = dp[index+1][rest];
                if(rest - arr[index] >= 0) {
                    dp[index][rest] += dp[index][rest - arr[index]];
                }
            }
        }
        return dp[0][aim];
    }


    public static void main(String[] args) {
        int[] weights = {3, 2, 4, 7};
        int[] values = {5, 6, 3, 19};
        int bag = 11;
        // èƒŒåŒ…é—®é¢˜
        System.out.println(maxValue(weights, values, bag));
        System.out.println(dpWay(weights, values, bag));

        System.out.println("=============================");

        // æœºå™¨äººè¿åŠ¨é—®é¢˜
        System.out.println(ways1(7, 4, 9, 5));
        System.out.println(waysCache(7, 4, 9, 5));
        System.out.println(ways2(7, 4, 9, 5));

        System.out.println("=============================");

        int[] arr = { 5, 10,50,100 };
        int sum = 1000;
        System.out.println(waysCoin(arr, sum));
        System.out.println(waysCoinBySearch(arr, sum));
        System.out.println(waysCoinByDP(arr, sum));
        System.out.println(waysPlush(arr, sum));
    }

}
